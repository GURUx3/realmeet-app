{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/guru_21/real-meet/client/launch-ui/lib/utils.ts"],"sourcesContent":["import { type ClassValue,clsx } from \"clsx\"\r\nimport { twMerge } from \"tailwind-merge\"\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACtB"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/guru_21/real-meet/client/launch-ui/app/meeting/%5Bcode%5D/MeetingSidebar.tsx"],"sourcesContent":["import { MessageSquare, Paperclip, X, Send } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface SidebarProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    activeTab: 'chat' | 'files';\r\n    setActiveTab: (tab: 'chat' | 'files') => void;\r\n    chatMessages: Array<{ sender: string, message: string, timestamp: Date, id: string }>;\r\n    chatInput: string;\r\n    setChatInput: (input: string) => void;\r\n    onSendMessage: (message: string) => void;\r\n    unreadCount: number;\r\n}\r\n\r\nexport default function MeetingSidebar({\r\n    isOpen,\r\n    onClose,\r\n    activeTab,\r\n    setActiveTab,\r\n    chatMessages,\r\n    chatInput,\r\n    setChatInput,\r\n    onSendMessage,\r\n    unreadCount\r\n}: SidebarProps) {\r\n\r\n    const handleSendMessage = () => {\r\n        if (chatInput.trim()) {\r\n            onSendMessage(chatInput);\r\n            setChatInput('');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className={cn(\r\n            \"absolute top-0 right-0 h-full z-30 transition-transform duration-300 ease-in-out flex flex-col\",\r\n            isOpen ? \"translate-x-0\" : \"translate-x-full\",\r\n            \"w-80 bg-black/60 backdrop-blur-xl border-l border-white/10\"\r\n        )}>\r\n            {/* Sidebar Header */}\r\n            <div className=\"flex items-center justify-between p-4 border-b border-white/10 shrink-0\">\r\n                <div className=\"flex gap-2\">\r\n                    <button\r\n                        onClick={() => setActiveTab('chat')}\r\n                        className={cn(\r\n                            \"relative px-4 py-2 rounded-lg text-sm font-medium transition-all\",\r\n                            activeTab === 'chat'\r\n                                ? \"bg-white/20 text-white\"\r\n                                : \"text-white/60 hover:text-white hover:bg-white/10\"\r\n                        )}\r\n                    >\r\n                        <MessageSquare className=\"h-4 w-4 inline mr-2\" />\r\n                        Chat\r\n                        {unreadCount > 0 && activeTab !== 'chat' && (\r\n                            <span className=\"absolute -top-1 -right-1 flex h-3 w-3\">\r\n                                <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75\"></span>\r\n                                <span className=\"relative inline-flex rounded-full h-3 w-3 bg-red-500\"></span>\r\n                            </span>\r\n                        )}\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setActiveTab('files')}\r\n                        className={cn(\r\n                            \"px-4 py-2 rounded-lg text-sm font-medium transition-all\",\r\n                            activeTab === 'files'\r\n                                ? \"bg-white/20 text-white\"\r\n                                : \"text-white/60 hover:text-white hover:bg-white/10\"\r\n                        )}\r\n                    >\r\n                        <Paperclip className=\"h-4 w-4 inline mr-2\" />\r\n                        Files\r\n                    </button>\r\n                </div>\r\n                <button\r\n                    onClick={onClose}\r\n                    className=\"p-2 rounded-lg hover:bg-white/10 transition-colors\"\r\n                >\r\n                    <X className=\"h-4 w-4 text-white/70\" />\r\n                </button>\r\n            </div>\r\n\r\n            {/* Sidebar Content */}\r\n            <div className=\"flex-1 flex flex-col min-h-0\">\r\n                {activeTab === 'chat' ? (\r\n                    <>\r\n                        {/* Chat Messages */}\r\n                        <div className=\"flex-1 overflow-y-auto p-4 space-y-3 min-h-0\">\r\n                            {chatMessages.length === 0 ? (\r\n                                <div className=\"flex flex-col items-center justify-center h-full text-white/40 text-sm\">\r\n                                    <MessageSquare className=\"h-8 w-8 mb-2\" />\r\n                                    <p>No messages yet</p>\r\n                                    <p className=\"text-xs mt-1\">Start chatting with your peer</p>\r\n                                </div>\r\n                            ) : (\r\n                                chatMessages.map((msg) => {\r\n                                    const isMe = msg.sender === 'You';\r\n                                    return (\r\n                                        <div key={msg.id} className={cn(\r\n                                            \"flex flex-col max-w-[85%] animate-in slide-in-from-bottom-2 fade-in duration-300\",\r\n                                            isMe ? \"ml-auto items-end\" : \"mr-auto items-start\"\r\n                                        )}>\r\n                                            <div className={cn(\r\n                                                \"p-3 rounded-2xl text-sm shadow-sm\",\r\n                                                isMe\r\n                                                    ? \"bg-indigo-600 text-white rounded-br-none\"\r\n                                                    : \"bg-zinc-800 border border-white/10 text-zinc-100 rounded-bl-none\"\r\n                                            )}>\r\n                                                {msg.message}\r\n                                            </div>\r\n                                            <div className=\"flex items-center gap-1 mt-1 px-1\">\r\n                                                <span className=\"text-[10px] text-zinc-500 font-medium\">{isMe ? \"You\" : msg.sender}</span>\r\n                                                <span className=\"text-[10px] text-zinc-600\">â€¢</span>\r\n                                                <span className=\"text-[10px] text-zinc-600\">{msg.timestamp.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}</span>\r\n                                            </div>\r\n                                        </div>\r\n                                    );\r\n                                })\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Chat Input */}\r\n                        <div className=\"p-4 border-t border-white/10 shrink-0\">\r\n                            <div className=\"flex gap-2\">\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={chatInput}\r\n                                    onChange={(e) => setChatInput(e.target.value)}\r\n                                    onKeyPress={(e) => {\r\n                                        if (e.key === 'Enter') {\r\n                                            handleSendMessage();\r\n                                        }\r\n                                    }}\r\n                                    placeholder=\"Type a message...\"\r\n                                    className=\"flex-1 bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder:text-white/40 focus:outline-none focus:ring-2 focus:ring-white/20\"\r\n                                />\r\n                                <button\r\n                                    onClick={handleSendMessage}\r\n                                    className=\"p-2 bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors\"\r\n                                >\r\n                                    <Send className=\"h-4 w-4 text-white\" />\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </>\r\n                ) : (\r\n                    /* File Sharing Tab */\r\n                    <div className=\"flex-1 p-4 overflow-y-auto\">\r\n                        <div className=\"flex flex-col items-center justify-center h-full text-zinc-500 space-y-4\">\r\n                            <div className=\"h-24 w-24 rounded-full bg-zinc-900/50 flex items-center justify-center border border-white/5 relative group\">\r\n                                <div className=\"absolute inset-0 bg-indigo-500/10 rounded-full blur-xl opacity-0 group-hover:opacity-100 transition-opacity\" />\r\n                                <Paperclip className=\"h-8 w-8 text-zinc-600 group-hover:text-indigo-400 transition-colors\" />\r\n                            </div>\r\n                            <div className=\"text-center\">\r\n                                <p className=\"text-sm font-medium text-white mb-1\">Share Resources</p>\r\n                                <p className=\"text-xs text-zinc-500 max-w-[200px]\">Securely share files with meeting participants.</p>\r\n                            </div>\r\n\r\n                            <button className=\"px-6 py-2.5 bg-white text-black text-xs font-bold rounded-lg hover:bg-zinc-200 transition-colors shadow-lg shadow-white/5\">\r\n                                Browse Files\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 376, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/guru_21/real-meet/client/launch-ui/components/ui/avatar.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Avatar = React.forwardRef<\r\n    React.ElementRef<typeof AvatarPrimitive.Root>,\r\n    React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\r\n>(({ className, ...props }, ref) => (\r\n    <AvatarPrimitive.Root\r\n        ref={ref}\r\n        className={cn(\r\n            \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\r\n            className\r\n        )}\r\n        {...props}\r\n    />\r\n))\r\nAvatar.displayName = AvatarPrimitive.Root.displayName\r\n\r\nconst AvatarImage = React.forwardRef<\r\n    React.ElementRef<typeof AvatarPrimitive.Image>,\r\n    React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\r\n>(({ className, ...props }, ref) => (\r\n    <AvatarPrimitive.Image\r\n        ref={ref}\r\n        className={cn(\"aspect-square h-full w-full\", className)}\r\n        {...props}\r\n    />\r\n))\r\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\r\n\r\nconst AvatarFallback = React.forwardRef<\r\n    React.ElementRef<typeof AvatarPrimitive.Fallback>,\r\n    React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\r\n>(({ className, ...props }, ref) => (\r\n    <AvatarPrimitive.Fallback\r\n        ref={ref}\r\n        className={cn(\r\n            \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\r\n            className\r\n        )}\r\n        {...props}\r\n    />\r\n))\r\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\r\n\r\nexport { Avatar, AvatarImage, AvatarFallback }\r\n"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,uBAAS,2KAAgB,MAG7B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,6LAAC,6KAAoB;QACjB,KAAK;QACL,WAAW,IAAA,qHAAE,EACT,iEACA;QAEH,GAAG,KAAK;;;;;;;AAGjB,OAAO,WAAW,GAAG,6KAAoB,CAAC,WAAW;AAErD,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,6LAAC,8KAAqB;QAClB,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,+BAA+B;QAC5C,GAAG,KAAK;;;;;;;AAGjB,YAAY,WAAW,GAAG,8KAAqB,CAAC,WAAW;AAE3D,MAAM,+BAAiB,2KAAgB,OAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,6LAAC,iLAAwB;QACrB,KAAK;QACL,WAAW,IAAA,qHAAE,EACT,wEACA;QAEH,GAAG,KAAK;;;;;;;AAGjB,eAAe,WAAW,GAAG,iLAAwB,CAAC,WAAW"}},
    {"offset": {"line": 440, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/guru_21/real-meet/client/launch-ui/hooks/useFaceTracking.ts"],"sourcesContent":["\r\nimport { useEffect, useRef } from 'react';\r\nimport { FaceLandmarker, FilesetResolver } from '@mediapipe/tasks-vision';\r\n\r\n/**\r\n * Optimized Face Tracking Hook\r\n * Directly updates the overlay element's transform to avoid React render cycles.\r\n */\r\nexport function useFaceTracking(\r\n    videoRef: React.RefObject<HTMLVideoElement | null>,\r\n    overlayRef: React.RefObject<HTMLDivElement | null>\r\n) {\r\n    const faceLandmarkerRef = useRef<FaceLandmarker | null>(null);\r\n    const requestRef = useRef<number | null>(null);\r\n    const lastTimeRef = useRef<number>(0);\r\n\r\n    useEffect(() => {\r\n        const initLandmarker = async () => {\r\n            const filesetResolver = await FilesetResolver.forVisionTasks(\r\n                \"https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.14/wasm\"\r\n            );\r\n            faceLandmarkerRef.current = await FaceLandmarker.createFromOptions(filesetResolver, {\r\n                baseOptions: {\r\n                    modelAssetPath: `https://storage.googleapis.com/mediapipe-models/face_landmarker/face_landmarker/float16/1/face_landmarker.task`,\r\n                    delegate: \"GPU\"\r\n                },\r\n                outputFaceBlendshapes: false,\r\n                runningMode: \"VIDEO\",\r\n                numFaces: 1\r\n            });\r\n            detectFace();\r\n        };\r\n\r\n        initLandmarker();\r\n\r\n        return () => {\r\n            if (requestRef.current) {\r\n                cancelAnimationFrame(requestRef.current);\r\n            }\r\n        };\r\n    }, []);\r\n\r\n    const detectFace = () => {\r\n        requestRef.current = requestAnimationFrame(detectFace);\r\n\r\n        if (!faceLandmarkerRef.current || !videoRef.current || !overlayRef.current) {\r\n            return;\r\n        }\r\n\r\n        const video = videoRef.current;\r\n        if (video.videoWidth > 0 && video.videoHeight > 0) {\r\n            const now = performance.now();\r\n            // Limit to ~30-60fps if needed, but for \"ultra fast\" let's run unlocked unless it lags\r\n            const startTimeMs = now;\r\n\r\n            const results = faceLandmarkerRef.current.detectForVideo(video, startTimeMs);\r\n\r\n            if (results.faceLandmarks && results.faceLandmarks.length > 0) {\r\n                // Get coordinates for the forehead (approx landmark 10)\r\n                const forehead = results.faceLandmarks[0][10];\r\n\r\n                // Convert normalized coordinates to percentage\r\n                const x = forehead.x * 100;\r\n                const y = forehead.y * 100;\r\n\r\n                // Direct DOM update for performance\r\n                overlayRef.current.style.display = 'flex';\r\n                // Using transform: translate3d for GPU acceleration\r\n                // We set left/top to 0 and use translate to position relative to container\r\n                overlayRef.current.style.left = `${x}%`;\r\n                overlayRef.current.style.top = `${y - 15}%`; // -15% offset\r\n            } else {\r\n                // Hide if lost? Or keep last position\r\n                // overlayRef.current.style.display = 'none';\r\n            }\r\n        }\r\n    };\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;;;;AAMO,SAAS,gBACZ,QAAkD,EAClD,UAAkD;;IAElD,MAAM,oBAAoB,IAAA,uKAAM,EAAwB;IACxD,MAAM,aAAa,IAAA,uKAAM,EAAgB;IACzC,MAAM,cAAc,IAAA,uKAAM,EAAS;IAEnC,IAAA,0KAAS;qCAAC;YACN,MAAM;4DAAiB;oBACnB,MAAM,kBAAkB,MAAM,sLAAe,CAAC,cAAc,CACxD;oBAEJ,kBAAkB,OAAO,GAAG,MAAM,qLAAc,CAAC,iBAAiB,CAAC,iBAAiB;wBAChF,aAAa;4BACT,gBAAgB,CAAC,8GAA8G,CAAC;4BAChI,UAAU;wBACd;wBACA,uBAAuB;wBACvB,aAAa;wBACb,UAAU;oBACd;oBACA;gBACJ;;YAEA;YAEA;6CAAO;oBACH,IAAI,WAAW,OAAO,EAAE;wBACpB,qBAAqB,WAAW,OAAO;oBAC3C;gBACJ;;QACJ;oCAAG,EAAE;IAEL,MAAM,aAAa;QACf,WAAW,OAAO,GAAG,sBAAsB;QAE3C,IAAI,CAAC,kBAAkB,OAAO,IAAI,CAAC,SAAS,OAAO,IAAI,CAAC,WAAW,OAAO,EAAE;YACxE;QACJ;QAEA,MAAM,QAAQ,SAAS,OAAO;QAC9B,IAAI,MAAM,UAAU,GAAG,KAAK,MAAM,WAAW,GAAG,GAAG;YAC/C,MAAM,MAAM,YAAY,GAAG;YAC3B,uFAAuF;YACvF,MAAM,cAAc;YAEpB,MAAM,UAAU,kBAAkB,OAAO,CAAC,cAAc,CAAC,OAAO;YAEhE,IAAI,QAAQ,aAAa,IAAI,QAAQ,aAAa,CAAC,MAAM,GAAG,GAAG;gBAC3D,wDAAwD;gBACxD,MAAM,WAAW,QAAQ,aAAa,CAAC,EAAE,CAAC,GAAG;gBAE7C,+CAA+C;gBAC/C,MAAM,IAAI,SAAS,CAAC,GAAG;gBACvB,MAAM,IAAI,SAAS,CAAC,GAAG;gBAEvB,oCAAoC;gBACpC,WAAW,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG;gBACnC,oDAAoD;gBACpD,2EAA2E;gBAC3E,WAAW,OAAO,CAAC,KAAK,CAAC,IAAI,GAAG,GAAG,EAAE,CAAC,CAAC;gBACvC,WAAW,OAAO,CAAC,KAAK,CAAC,GAAG,GAAG,GAAG,IAAI,GAAG,CAAC,CAAC,EAAE,cAAc;YAC/D,OAAO;YACH,sCAAsC;YACtC,6CAA6C;YACjD;QACJ;IACJ;AACJ;GArEgB"}},
    {"offset": {"line": 519, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/guru_21/real-meet/client/launch-ui/components/meeting/ARNameTag.tsx"],"sourcesContent":["\r\nimport { useRef } from 'react';\r\nimport { useFaceTracking } from '@/hooks/useFaceTracking';\r\nimport { cn } from '@/lib/utils';\r\n\r\ninterface ARNameTagProps {\r\n    name: string;\r\n    role: string;\r\n    activity?: string; // Kept in props for compatibility but not used or used minimally\r\n    videoRef: React.RefObject<HTMLVideoElement | null>;\r\n    className?: string;\r\n}\r\n\r\nexport const ARNameTag = ({ name, role, videoRef, className }: ARNameTagProps) => {\r\n    const overlayRef = useRef<HTMLDivElement>(null);\r\n\r\n    // Pass overlayRef to hook for direct updates\r\n    useFaceTracking(videoRef, overlayRef);\r\n\r\n    return (\r\n        <div\r\n            ref={overlayRef}\r\n            className={cn(\r\n                \"absolute z-20 pointer-events-none flex flex-col items-center will-change-transform hidden\", // Hidden initially until tracked\r\n                className\r\n            )}\r\n            style={{\r\n                // Initial styles, will be overridden by hook\r\n                transform: 'translate(-50%, -100%)'\r\n            }}\r\n        >\r\n            {/* Minimalist Transparent Bar */}\r\n            <div className=\"flex flex-col items-center\">\r\n                {/* No vertical line, floating directly */}\r\n\r\n                <div className=\"relative overflow-hidden rounded-full border border-white/10 bg-black/20 backdrop-blur-sm px-6 py-2 min-w-[200px] text-center shadow-sm\">\r\n                    {/* Very subtle wide gradient */}\r\n                    <div className=\"absolute inset-0 bg-linear-to-r from-transparent via-white/5 to-transparent opacity-30\" />\r\n\r\n                    <div className=\"relative z-10 flex flex-row items-center justify-center gap-3\">\r\n                        <h3 className=\"text-base font-semibold text-white/90 leading-none tracking-tight shadow-black drop-shadow-sm whitespace-nowrap\">\r\n                            {name}\r\n                        </h3>\r\n                        <div className=\"h-3 w-px bg-white/20\" />\r\n                        <p className=\"text-sm font-medium text-blue-200/80 uppercase tracking-wide whitespace-nowrap\">\r\n                            {role}\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;;;;;;AAUO,MAAM,YAAY,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,SAAS,EAAkB;;IACzE,MAAM,aAAa,IAAA,uKAAM,EAAiB;IAE1C,6CAA6C;IAC7C,IAAA,8IAAe,EAAC,UAAU;IAE1B,qBACI,6LAAC;QACG,KAAK;QACL,WAAW,IAAA,qHAAE,EACT,6FACA;QAEJ,OAAO;YACH,6CAA6C;YAC7C,WAAW;QACf;kBAGA,cAAA,6LAAC;YAAI,WAAU;sBAGX,cAAA,6LAAC;gBAAI,WAAU;;kCAEX,6LAAC;wBAAI,WAAU;;;;;;kCAEf,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAG,WAAU;0CACT;;;;;;0CAEL,6LAAC;gCAAI,WAAU;;;;;;0CACf,6LAAC;gCAAE,WAAU;0CACR;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO7B;GAvCa;;QAIT,8IAAe;;;KAJN"}},
    {"offset": {"line": 620, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/guru_21/real-meet/client/launch-ui/app/meeting/%5Bcode%5D/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { useUser } from \"@clerk/nextjs\";\r\nimport { io, Socket } from \"socket.io-client\";\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport { Video, VideoOff, Mic, MicOff, PhoneOff, Wifi, MoreHorizontal, Check, Copy, Loader2, User } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport MeetingSidebar from \"./MeetingSidebar\";\r\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\r\n\r\nimport { ARNameTag } from \"@/components/meeting/ARNameTag\";\r\n\r\n// WebRTC Configuration\r\nconst RTC_CONFIG = {\r\n    iceServers: [\r\n        { urls: \"stun:stun.l.google.com:19302\" },\r\n        { urls: \"stun:global.stun.twilio.com:3478\" },\r\n    ],\r\n};\r\n\r\ninterface PeerData {\r\n    socketId: string;\r\n    userId: string;\r\n    stream?: MediaStream;\r\n    name?: string;\r\n    role?: string;\r\n    activity?: string;\r\n    imageUrl?: string;\r\n}\r\n\r\ninterface ChatMessage {\r\n    sender: string;\r\n    senderId: string;\r\n    message: string;\r\n    timestamp: Date;\r\n    id: string;\r\n}\r\n\r\nexport default function MeetingPage() {\r\n    const { user, isLoaded } = useUser();\r\n    const router = useRouter();\r\n    const params = useParams();\r\n    const meetingCode = params.code as string;\r\n\r\n    // State\r\n    const [isConnected, setIsConnected] = useState(false);\r\n\r\n    // Multi-user State\r\n    const [peers, setPeers] = useState<Map<string, PeerData>>(new Map());\r\n    const [localStream, setLocalStream] = useState<MediaStream | null>(null);\r\n\r\n    const [isMuted, setIsMuted] = useState(false);\r\n    const [isVideoOff, setIsVideoOff] = useState(false);\r\n    const [error, setError] = useState<string | null>(null); // Critical errors\r\n\r\n    const [isSidebarOpen, setIsSidebarOpen] = useState(false);\r\n    const [sidebarTab, setSidebarTab] = useState<'chat' | 'files'>('chat');\r\n    const [unreadCount, setUnreadCount] = useState(0);\r\n    const [chatMessages, setChatMessages] = useState<ChatMessage[]>([]);\r\n    const [chatInput, setChatInput] = useState('');\r\n    const [hasCopied, setHasCopied] = useState(false);\r\n\r\n    // Track remote media states (muted/video off) per socketId\r\n    const [remoteMediaStates, setRemoteMediaStates] = useState<Record<string, { isVideoOff: boolean, isAudioOff: boolean, userImage?: string, name?: string, role?: string, activity?: string }>>({});\r\n\r\n    // Refs\r\n    // socketId -> RTCPeerConnection\r\n    const peerConnections = useRef<Map<string, RTCPeerConnection>>(new Map());\r\n    const localVideoRef = useRef<HTMLVideoElement>(null);\r\n    const socketRef = useRef<Socket | null>(null);\r\n    const initialized = useRef(false);\r\n    // socketId -> Array of candidates\r\n    const iceCandidatesQueues = useRef<Map<string, RTCIceCandidate[]>>(new Map());\r\n\r\n    const isMutedRef = useRef(false);\r\n    const isVideoOffRef = useRef(false);\r\n\r\n    // --- [LOGIC SECTION] ---\r\n    useEffect(() => {\r\n        if (!isLoaded || !user || !meetingCode || initialized.current) return;\r\n        initialized.current = true;\r\n\r\n        navigator.mediaDevices.getUserMedia({ video: true, audio: true })\r\n            .then((stream) => {\r\n                setLocalStream(stream);\r\n                if (localVideoRef.current) {\r\n                    localVideoRef.current.srcObject = stream;\r\n                }\r\n                connectSocket(stream);\r\n            })\r\n            .catch((err) => {\r\n                console.error(\"Failed to get media:\", err);\r\n                setError(\"Camera/Microphone access denied\");\r\n            });\r\n\r\n        return () => cleanup();\r\n    }, [isLoaded, user, meetingCode]);\r\n\r\n    // Force re-render when peers map changes (React doesn't detect Map mutations)\r\n    const [_, setTick] = useState(0);\r\n    const updatePeers = () => setTick(t => t + 1);\r\n\r\n    const connectSocket = (currentStream: MediaStream) => {\r\n        if (socketRef.current?.connected) return;\r\n        if (socketRef.current) {\r\n            socketRef.current.removeAllListeners();\r\n            socketRef.current.disconnect();\r\n        }\r\n\r\n        const socketInstance = io(process.env.NEXT_PUBLIC_API_URL || \"http://localhost:3001\", {\r\n            path: \"/socket.io/\",\r\n            transports: [\"websocket\"],\r\n            reconnection: false,\r\n            timeout: 10000,\r\n        });\r\n\r\n        socketRef.current = socketInstance;\r\n\r\n        socketInstance.on(\"connect\", () => {\r\n            setIsConnected(true);\r\n            setError(null);\r\n            socketInstance.emit(\"join-room\", { roomId: meetingCode, userId: user!.id });\r\n        });\r\n\r\n        socketInstance.on(\"connect_error\", () => setIsConnected(false));\r\n        socketInstance.on(\"disconnect\", (reason) => {\r\n            setIsConnected(false);\r\n            if (reason === \"io server disconnect\") socketInstance.connect();\r\n        });\r\n\r\n        socketInstance.on(\"room-full\", () => {\r\n            setError(\"Room is full (Max 4 participants). Redirecting...\");\r\n            setTimeout(() => router.push(\"/dashboard\"), 3000);\r\n        });\r\n\r\n        // Chat History\r\n        socketInstance.on(\"chat-history\", (history: any[]) => {\r\n            setChatMessages(history.map(msg => ({\r\n                id: msg.id,\r\n                sender: msg.senderName,\r\n                senderId: msg.senderId,\r\n                message: msg.message,\r\n                timestamp: new Date(msg.timestamp)\r\n            })));\r\n        });\r\n\r\n        // 1. Existing participants (Mesh initialization)\r\n        socketInstance.on(\"existing-users\", (existingUsers: Array<PeerData>) => {\r\n            existingUsers.forEach(async (peer) => {\r\n                if (!peerConnections.current.has(peer.socketId)) {\r\n                    // Update peers map initially with info (no stream yet)\r\n                    setPeers(prev => {\r\n                        const newMap = new Map(prev);\r\n                        newMap.set(peer.socketId, peer);\r\n                        return newMap;\r\n                    });\r\n                    // Pre-populate media state with static info\r\n                    setRemoteMediaStates(prev => ({\r\n                        ...prev,\r\n                        [peer.socketId]: {\r\n                            isVideoOff: false, // Default, will update\r\n                            isAudioOff: false,\r\n                            userImage: peer.imageUrl,\r\n                            name: peer.name,\r\n                            role: peer.role,\r\n                            activity: peer.activity\r\n                        }\r\n                    }));\r\n                    await initiateConnection(peer.socketId, peer.userId, currentStream);\r\n                }\r\n            });\r\n        });\r\n\r\n        // 2. New user joined\r\n        socketInstance.on(\"user-joined\", ({ socketId, userId, name, role, activity, imageUrl }: PeerData) => {\r\n            // Add initial info\r\n            setPeers(prev => {\r\n                const newMap = new Map(prev);\r\n                newMap.set(socketId, { socketId, userId, name, role, activity, imageUrl });\r\n                return newMap;\r\n            });\r\n            setRemoteMediaStates(prev => ({\r\n                ...prev,\r\n                [socketId]: {\r\n                    isVideoOff: false,\r\n                    isAudioOff: false,\r\n                    userImage: imageUrl,\r\n                    name: name,\r\n                    role: role,\r\n                    activity: activity\r\n                }\r\n            }));\r\n\r\n            // Send our media state\r\n            if (isMutedRef.current) {\r\n                socketInstance.emit('toggle-media', { roomId: meetingCode, kind: 'audio', status: true });\r\n            }\r\n            if (isVideoOffRef.current) {\r\n                socketInstance.emit('toggle-media', {\r\n                    roomId: meetingCode,\r\n                    kind: 'video',\r\n                    status: true,\r\n                    userImage: user?.imageUrl\r\n                });\r\n            }\r\n        });\r\n\r\n        // Signaling\r\n        socketInstance.on(\"offer\", async ({ offer, senderId, senderUserId }: { offer: RTCSessionDescriptionInit, senderId: string, senderUserId: string }) => {\r\n            await handleReceiveOffer(offer, senderId, senderUserId, currentStream);\r\n        });\r\n\r\n        socketInstance.on(\"answer\", async ({ answer, senderId }: { answer: RTCSessionDescriptionInit, senderId: string }) => {\r\n            await handleReceiveAnswer(answer, senderId);\r\n        });\r\n\r\n        socketInstance.on(\"ice-candidate\", async ({ candidate, senderId }: { candidate: RTCIceCandidate, senderId: string }) => {\r\n            await handleReceiveIceCandidate(candidate, senderId);\r\n        });\r\n\r\n        socketInstance.on(\"user-left\", ({ socketId }) => {\r\n            handleUserLeft(socketId);\r\n        });\r\n\r\n        socketInstance.on(\"receive-message\", handleReceiveMessage);\r\n\r\n        socketInstance.on(\"media-toggled\", ({ kind, status, senderId, userImage }) => {\r\n            setRemoteMediaStates(prev => ({\r\n                ...prev,\r\n                [senderId]: {\r\n                    ...prev[senderId],\r\n                    [kind === 'video' ? 'isVideoOff' : 'isAudioOff']: !status, // status=true means active\r\n                    ...(userImage ? { userImage } : {})\r\n                }\r\n            }));\r\n        });\r\n    };\r\n\r\n    // --- WebRTC Core ---\r\n\r\n    const createPeerConnection = (targetSocketId: string, targetUserId: string, stream: MediaStream) => {\r\n        if (peerConnections.current.has(targetSocketId)) {\r\n            peerConnections.current.get(targetSocketId)?.close();\r\n        }\r\n\r\n        const pc = new RTCPeerConnection(RTC_CONFIG);\r\n        // Add local tracks\r\n        stream.getTracks().forEach((track) => pc.addTrack(track, stream));\r\n\r\n        pc.ontrack = (event) => {\r\n            if (event.streams && event.streams[0]) {\r\n                setPeers(prev => {\r\n                    const newMap = new Map(prev);\r\n                    newMap.set(targetSocketId, { socketId: targetSocketId, userId: targetUserId, stream: event.streams[0] });\r\n                    return newMap;\r\n                });\r\n                updatePeers();\r\n            }\r\n        };\r\n\r\n        pc.onicecandidate = (event) => {\r\n            if (event.candidate && socketRef.current) {\r\n                socketRef.current.emit(\"ice-candidate\", {\r\n                    candidate: event.candidate,\r\n                    roomId: meetingCode,\r\n                    targetSocketId: targetSocketId\r\n                });\r\n            }\r\n        };\r\n\r\n        pc.onconnectionstatechange = () => {\r\n            // Optional: handle different states\r\n            if (pc.connectionState === 'failed' || pc.connectionState === 'disconnected') {\r\n                // handleUserLeft(targetSocketId); // Let explicit leave handle this primarily\r\n            }\r\n        };\r\n\r\n        peerConnections.current.set(targetSocketId, pc);\r\n        return pc;\r\n    };\r\n\r\n    const initiateConnection = async (targetSocketId: string, targetUserId: string, stream: MediaStream) => {\r\n        const pc = createPeerConnection(targetSocketId, targetUserId, stream);\r\n        try {\r\n            const offer = await pc.createOffer();\r\n            await pc.setLocalDescription(offer);\r\n            socketRef.current?.emit(\"offer\", {\r\n                offer,\r\n                roomId: meetingCode,\r\n                targetSocketId: targetSocketId\r\n            });\r\n        } catch (err) {\r\n            console.error(\"Error creating offer:\", err);\r\n        }\r\n    };\r\n\r\n    const handleReceiveOffer = async (offer: RTCSessionDescriptionInit, senderId: string, senderUserId: string, stream: MediaStream) => {\r\n        const pc = createPeerConnection(senderId, senderUserId, stream);\r\n        try {\r\n            await pc.setRemoteDescription(new RTCSessionDescription(offer));\r\n\r\n            // Process queued candidates\r\n            const queue = iceCandidatesQueues.current.get(senderId) || [];\r\n            while (queue.length > 0) {\r\n                await pc.addIceCandidate(queue.shift()!).catch(console.error);\r\n            }\r\n            iceCandidatesQueues.current.delete(senderId);\r\n\r\n            const answer = await pc.createAnswer();\r\n            await pc.setLocalDescription(answer);\r\n\r\n            socketRef.current?.emit(\"answer\", {\r\n                answer,\r\n                roomId: meetingCode,\r\n                targetSocketId: senderId\r\n            });\r\n        } catch (err) {\r\n            console.error(\"Error handling offer:\", err);\r\n        }\r\n    };\r\n\r\n    const handleReceiveAnswer = async (answer: RTCSessionDescriptionInit, senderId: string) => {\r\n        const pc = peerConnections.current.get(senderId);\r\n        if (pc && pc.signalingState !== \"stable\") {\r\n            await pc.setRemoteDescription(new RTCSessionDescription(answer));\r\n        }\r\n    };\r\n\r\n    const handleReceiveIceCandidate = async (candidate: RTCIceCandidate, senderId: string) => {\r\n        const pc = peerConnections.current.get(senderId);\r\n        if (pc && pc.remoteDescription) {\r\n            await pc.addIceCandidate(new RTCIceCandidate(candidate)).catch(console.error);\r\n        } else {\r\n            const queue = iceCandidatesQueues.current.get(senderId) || [];\r\n            queue.push(new RTCIceCandidate(candidate));\r\n            iceCandidatesQueues.current.set(senderId, queue);\r\n        }\r\n    };\r\n\r\n    const handleUserLeft = (socketId: string) => {\r\n        if (peerConnections.current.has(socketId)) {\r\n            peerConnections.current.get(socketId)?.close();\r\n            peerConnections.current.delete(socketId);\r\n        }\r\n        setPeers(prev => {\r\n            const newMap = new Map(prev);\r\n            newMap.delete(socketId);\r\n            return newMap;\r\n        });\r\n        updatePeers();\r\n\r\n        // Cleanup media state\r\n        setRemoteMediaStates(prev => {\r\n            const newState = { ...prev };\r\n            delete newState[socketId];\r\n            return newState;\r\n        });\r\n    };\r\n\r\n    // --- Chat ---\r\n\r\n    const handleReceiveMessage = ({ message, senderName, senderId, timestamp }: any) => {\r\n        setChatMessages((prev) => [...prev, {\r\n            sender: senderName,\r\n            senderId,\r\n            message,\r\n            timestamp: new Date(timestamp),\r\n            id: `${Date.now()}-${Math.random()}`\r\n        }]);\r\n        if (!isSidebarOpen || sidebarTab !== 'chat') setUnreadCount(prev => prev + 1);\r\n    };\r\n\r\n    const sendMessage = (message: string) => {\r\n        if (!message.trim() || !socketRef.current) return;\r\n        // Optimistic update\r\n        const newMessage = {\r\n            sender: 'You',\r\n            senderId: user!.id,\r\n            message,\r\n            timestamp: new Date(),\r\n            id: `${Date.now()}-${Math.random()}`\r\n        };\r\n        // We rely on server broadcast for consistency in this version to match valid timestamps,\r\n        // but optimistic is better for UX.\r\n        // For now, let's append it.\r\n        setChatMessages((prev) => [...prev, newMessage]);\r\n\r\n        socketRef.current.emit('send-message', { roomId: meetingCode, message, senderName: user?.firstName || 'Anonymous' });\r\n    };\r\n\r\n    // --- Cleanup & Controls ---\r\n\r\n    const cleanup = () => {\r\n        if (localStream) {\r\n            localStream.getTracks().forEach(track => track.stop());\r\n        }\r\n        peerConnections.current.forEach(pc => pc.close());\r\n        peerConnections.current.clear();\r\n\r\n        if (socketRef.current) {\r\n            socketRef.current.disconnect();\r\n            socketRef.current = null;\r\n        }\r\n        initialized.current = false;\r\n    };\r\n\r\n    // --- Controls Logic ---\r\n\r\n    const toggleMute = () => {\r\n        if (localStream) {\r\n            localStream.getAudioTracks().forEach((track) => (track.enabled = !track.enabled));\r\n            const newMuted = !isMuted;\r\n            setIsMuted(newMuted);\r\n            isMutedRef.current = newMuted;\r\n            socketRef.current?.emit('toggle-media', { roomId: meetingCode, kind: 'audio', status: !newMuted });\r\n        }\r\n    };\r\n\r\n    const toggleVideo = () => {\r\n        if (localStream) {\r\n            localStream.getVideoTracks().forEach((track) => (track.enabled = !track.enabled));\r\n            const newVideoOff = !isVideoOff;\r\n            setIsVideoOff(newVideoOff);\r\n            isVideoOffRef.current = newVideoOff;\r\n            socketRef.current?.emit('toggle-media', {\r\n                roomId: meetingCode,\r\n                kind: 'video',\r\n                status: !newVideoOff,\r\n                userImage: user?.imageUrl\r\n            });\r\n        }\r\n    };\r\n\r\n    const leaveMeeting = () => {\r\n        cleanup();\r\n        router.push(\"/dashboard\");\r\n    };\r\n\r\n    const copyToClipboard = () => {\r\n        navigator.clipboard.writeText(meetingCode);\r\n        setHasCopied(true);\r\n        setTimeout(() => setHasCopied(false), 2000);\r\n    };\r\n\r\n    // --- Layout Logic ---\r\n    const peerCount = peers.size;\r\n    const totalParticipants = peerCount + 1; // +1 for self\r\n\r\n    // UI Grid Classes based on count\r\n    const getGridClass = () => {\r\n        if (peerCount === 0) return \"flex items-center justify-center\"; // Waiting state\r\n        if (peerCount === 1) return \"flex items-center justify-center p-0\"; // 1 on 1 (Full screenish)\r\n        return \"grid grid-cols-2 gap-2 p-2 place-content-center h-full\"; // 2+ Participants (Grid)\r\n    };\r\n\r\n    const renderRemoteVideo = (peer: PeerData) => {\r\n        const mediaState = remoteMediaStates[peer.socketId];\r\n        const isVideoOff = mediaState?.isVideoOff;\r\n\r\n        // Use ref callback to get the video element from the VideoPlayer if possible,\r\n        // or wrap VideoPlayer to forward ref.\r\n        // For simplicity, we can try to pass a ref to VideoPlayer, but since it maps multiple peers,\r\n        // we can't easily use a single ref.\r\n        // Better approach: Make a wrapper component for RemotePeer that handles its own ref and tracking.\r\n\r\n        return (\r\n            <RemotePeer\r\n                key={peer.socketId}\r\n                peer={peer}\r\n                mediaState={mediaState}\r\n                peerCount={peerCount}\r\n            />\r\n        );\r\n    };\r\n\r\n    if (error) {\r\n        return (\r\n            <div className=\"flex h-screen items-center justify-center bg-[#050505] text-white\">\r\n                <div className=\"text-center space-y-6\">\r\n                    <div className=\"inline-flex h-16 w-16 items-center justify-center rounded-2xl bg-red-500/10 border border-red-500/20 text-red-500\">\r\n                        <Wifi className=\"h-8 w-8\" />\r\n                    </div>\r\n                    <h1 className=\"text-2xl font-bold text-white tracking-tight\">Connection Failed</h1>\r\n                    <p className=\"text-zinc-500\">{error}</p>\r\n                    <button onClick={() => router.push(\"/dashboard\")} className=\"px-8 py-3 bg-white text-black rounded-xl hover:bg-zinc-200 transition font-medium\">\r\n                        Return to Dashboard\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"relative h-screen w-full bg-[#030303] overflow-hidden font-sans\">\r\n            {/* Textures */}\r\n            <div className=\"absolute inset-0 pointer-events-none opacity-20 z-0\">\r\n                <div className=\"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20 brightness-100 contrast-150 mix-blend-overlay\"></div>\r\n            </div>\r\n\r\n            {/* Header / Top Bar */}\r\n            <div className=\"absolute top-0 left-0 right-0 p-6 z-20 flex justify-between items-start pointer-events-none\">\r\n                {/* Session Code */}\r\n                <div className=\"pointer-events-auto group flex items-center gap-0 rounded-xl bg-zinc-900/80 backdrop-blur-md border border-white/10 shadow-xl overflow-hidden\">\r\n                    <div className=\"px-4 py-2.5 flex flex-col justify-center border-r border-white/5 bg-white/5\">\r\n                        <span className=\"text-[10px] font-bold text-zinc-500 uppercase tracking-widest leading-none mb-1\">Session</span>\r\n                        <span className=\"text-sm font-mono font-bold text-white tracking-widest leading-none\">{meetingCode}</span>\r\n                    </div>\r\n                    <button onClick={copyToClipboard} className=\"h-full px-4 py-2 flex items-center justify-center hover:bg-orange-500/10 transition-colors text-zinc-400 hover:text-orange-400\">\r\n                        {hasCopied ? <Check className=\"h-4 w-4 text-emerald-500\" /> : <Copy className=\"h-4 w-4\" />}\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Status */}\r\n                <div className=\"pointer-events-auto\">\r\n                    {peerCount > 0 ? (\r\n                        <div className=\"flex items-center gap-2 rounded-full bg-emerald-500/10 backdrop-blur-md px-3 py-1.5 border border-emerald-500/20 shadow-lg\">\r\n                            <div className=\"h-1.5 w-1.5 rounded-full bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.8)] animate-pulse\" />\r\n                            <span className=\"text-[10px] font-bold uppercase text-emerald-400 tracking-wider inline-block\">\r\n                                {peerCount + 1} Active Limit 4\r\n                            </span>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"flex items-center gap-2 rounded-full bg-amber-500/10 backdrop-blur-md px-3 py-1.5 border border-amber-500/20 shadow-lg\">\r\n                            <Loader2 className=\"h-3 w-3 text-amber-500 animate-spin\" />\r\n                            <span className=\"text-[10px] font-bold uppercase text-amber-400 tracking-wider\">Waiting for others</span>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Main Content Area - Dynamic Grid */}\r\n            <div className={cn(\"absolute inset-0 z-10\", getGridClass())}>\r\n                {peerCount === 0 ? (\r\n                    // Waiting State\r\n                    <div className=\"relative flex flex-col items-center justify-center\">\r\n                        <div className=\"relative z-10 flex h-24 w-24 items-center justify-center rounded-full bg-[#0A0A0A] border border-orange-500/20 shadow-[0_0_40px_rgba(249,115,22,0.2)] mb-8\">\r\n                            <div className=\"absolute inset-0 rounded-full border border-orange-500/20 animate-[spin_8s_linear_infinite]\" />\r\n                            <Wifi className=\"relative h-8 w-8 text-orange-500 animate-ping\" />\r\n                        </div>\r\n                        <h2 className=\"text-2xl font-semibold text-white tracking-tight text-center\">Waiting for participants...</h2>\r\n                        <p className=\"text-zinc-500 text-sm mt-2\">Share the code to start the meeting.</p>\r\n                    </div>\r\n                ) : (\r\n                    <>\r\n                        {/* Render Remote Peers */}\r\n                        {Array.from(peers.values()).map(peer => renderRemoteVideo(peer))}\r\n\r\n                        {/* Render Local User as part of Grid if 4 participants (3 remote + 1 self) */}\r\n                        {peerCount === 3 && (\r\n                            <div className=\"relative bg-zinc-900 rounded-lg overflow-hidden border border-white/5 shadow-2xl\">\r\n                                <VideoPlayer\r\n                                    stream={localStream}\r\n                                    muted={true}\r\n                                    mirror={true}\r\n                                    className={cn(isVideoOff && \"hidden\")}\r\n                                />\r\n                                {isVideoOff && (\r\n                                    <div className=\"absolute inset-0 flex items-center justify-center bg-zinc-900\">\r\n                                        <Avatar className=\"h-24 w-24 border-4 border-zinc-900\">\r\n                                            <AvatarImage src={user?.imageUrl} />\r\n                                            <AvatarFallback>You</AvatarFallback>\r\n                                        </Avatar>\r\n                                    </div>\r\n                                )}\r\n                                <div className=\"absolute bottom-4 left-4 z-10 px-2 py-1 rounded bg-black/60 backdrop-blur-md text-xs font-medium text-white shadow-sm border border-white/5\">\r\n                                    You\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </>\r\n                )}\r\n            </div>\r\n\r\n            {/* Self Video - PiP (Only visible if NOT in grid, i.e., peerCount < 3) */}\r\n            {peerCount < 3 && (\r\n                <div className=\"absolute bottom-6 right-6 z-30 h-40 w-28 sm:h-56 sm:w-40 rounded-2xl bg-zinc-900 border border-white/10 shadow-[0_20px_50px_rgba(0,0,0,0.5)] overflow-hidden transition-all hover:scale-105 hover:border-orange-500/30 group\">\r\n                    <VideoPlayer\r\n                        stream={localStream}\r\n                        muted={true}\r\n                        mirror={true}\r\n                        className={cn(isVideoOff && \"hidden\")}\r\n                    />\r\n                    {isVideoOff && (\r\n                        <div className=\"absolute inset-0 flex items-center justify-center bg-zinc-900\">\r\n                            <Avatar className=\"h-16 w-16 border-2 border-zinc-800\">\r\n                                <AvatarImage src={user?.imageUrl} />\r\n                                <AvatarFallback>You</AvatarFallback>\r\n                            </Avatar>\r\n                        </div>\r\n                    )}\r\n                    <div className=\"absolute bottom-2 left-2 px-2 py-1 rounded bg-black/60 backdrop-blur-sm text-[10px] font-medium text-white/90 border border-white/5\">You</div>\r\n                </div>\r\n            )}\r\n\r\n            {/* REMOVED: Ghost Grid Overlay block was here */}\r\n\r\n\r\n            {/* Controls Bar */}\r\n            <div className=\"absolute bottom-8 left-1/2 z-30 flex -translate-x-1/2 items-center gap-2 p-2 rounded-2xl bg-[#0A0A0A]/90 backdrop-blur-xl border border-white/10 shadow-2xl shadow-black/50\">\r\n                <button onClick={toggleMute} className={cn(\"flex h-12 w-12 items-center justify-center rounded-xl transition\", isMuted ? \"bg-red-500/10 text-red-500\" : \"bg-white/5 text-zinc-200 hover:text-white\")}>\r\n                    {isMuted ? <MicOff className=\"h-5 w-5\" /> : <Mic className=\"h-5 w-5\" />}\r\n                </button>\r\n                <button onClick={toggleVideo} className={cn(\"flex h-12 w-12 items-center justify-center rounded-xl transition\", isVideoOff ? \"bg-red-500/10 text-red-500\" : \"bg-white/5 text-zinc-200 hover:text-white\")}>\r\n                    {isVideoOff ? <VideoOff className=\"h-5 w-5\" /> : <Video className=\"h-5 w-5\" />}\r\n                </button>\r\n                <div className=\"w-px h-8 bg-white/10 mx-1\" />\r\n                <button onClick={() => setIsSidebarOpen(!isSidebarOpen)} className={cn(\"relative flex h-12 w-12 items-center justify-center rounded-xl transition\", isSidebarOpen ? \"bg-orange-500/20 text-orange-500\" : \"bg-white/5 text-zinc-200 hover:text-white\")}>\r\n                    <MoreHorizontal className=\"h-5 w-5\" />\r\n                    {unreadCount > 0 && <span className=\"absolute top-2 right-2 h-2.5 w-2.5 rounded-full bg-orange-500 animate-pulse\" />}\r\n                </button>\r\n                <button onClick={leaveMeeting} className=\"ml-2 flex h-12 px-6 items-center justify-center gap-2 rounded-xl bg-red-500 hover:bg-red-600 text-white shadow-lg\">\r\n                    <PhoneOff className=\"h-5 w-5\" />\r\n                    <span className=\"text-sm font-semibold hidden sm:inline-block\">End</span>\r\n                </button>\r\n            </div>\r\n\r\n            {/* Sidebar */}\r\n            <MeetingSidebar\r\n                isOpen={isSidebarOpen}\r\n                onClose={() => setIsSidebarOpen(false)}\r\n                activeTab={sidebarTab}\r\n                setActiveTab={setSidebarTab}\r\n                chatMessages={chatMessages}\r\n                chatInput={chatInput}\r\n                setChatInput={setChatInput}\r\n                onSendMessage={sendMessage}\r\n                unreadCount={unreadCount}\r\n            />\r\n\r\n            <style jsx global>{`\r\n                .mirror-mode { transform: scaleX(-1); }\r\n            `}</style>\r\n        </div>\r\n    );\r\n}\r\n\r\n// Helper component for playing streams\r\nfunction VideoPlayer({\r\n    stream,\r\n    muted = false,\r\n    mirror = false,\r\n    className,\r\n    videoRef\r\n}: {\r\n    stream?: MediaStream | null,\r\n    muted?: boolean,\r\n    mirror?: boolean,\r\n    className?: string,\r\n    videoRef?: React.RefObject<HTMLVideoElement | null>\r\n}) {\r\n    const internalRef = useRef<HTMLVideoElement>(null);\r\n    const refToUse = videoRef || internalRef;\r\n\r\n    useEffect(() => {\r\n        if (refToUse.current && stream) {\r\n            refToUse.current.srcObject = stream;\r\n            refToUse.current.play().catch(e => console.error(\"Auto-play failed:\", e));\r\n        } else if (refToUse.current) {\r\n            refToUse.current.srcObject = null;\r\n        }\r\n    }, [stream, refToUse]);\r\n\r\n    if (!stream) return (\r\n        <div className=\"flex h-full w-full items-center justify-center bg-zinc-900 border border-white/5 rounded-lg\">\r\n            <Loader2 className=\"h-8 w-8 text-white/20 animate-spin\" />\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <video\r\n            ref={refToUse}\r\n            autoPlay\r\n            playsInline\r\n            muted={muted}\r\n            className={cn(\r\n                \"h-full w-full object-cover animate-in fade-in\",\r\n                mirror && \"transform scale-x-[-1]\",\r\n                className\r\n            )}\r\n        />\r\n    );\r\n}\r\n\r\nfunction RemotePeer({ peer, mediaState, peerCount }: { peer: PeerData, mediaState: any, peerCount: number }) {\r\n    const videoRef = useRef<HTMLVideoElement>(null);\r\n    const isVideoOff = mediaState?.isVideoOff;\r\n\r\n    return (\r\n        <div className={cn(\r\n            \"relative bg-zinc-900 overflow-hidden shadow-2xl transition-all\",\r\n            peerCount === 1 ? \"w-full h-full\" : \"w-full h-full\",\r\n            \"rounded-lg border border-white/5\"\r\n        )}>\r\n            {isVideoOff ? (\r\n                <div className=\"absolute inset-0 flex flex-col items-center justify-center bg-zinc-800\">\r\n                    <Avatar className=\"h-24 w-24 border-4 border-zinc-900 mb-4\">\r\n                        <AvatarImage src={mediaState?.userImage || \"\"} className=\"object-cover\" />\r\n                        <AvatarFallback className=\"bg-zinc-700 text-zinc-400\"><User className=\"h-10 w-10\" /></AvatarFallback>\r\n                    </Avatar>\r\n                    <p className=\"text-zinc-400 font-medium\">Camera Off</p>\r\n                </div>\r\n            ) : (\r\n                <VideoPlayer stream={peer.stream} videoRef={videoRef} />\r\n            )}\r\n\r\n            {/* AR Name Tag - Only show if video is ON and we have a name */}\r\n            {!isVideoOff && mediaState?.name && (\r\n                <ARNameTag\r\n                    name={mediaState.name}\r\n                    role={mediaState.role || \"Developer\"}\r\n                    activity={mediaState.activity || \"Working\"}\r\n                    videoRef={videoRef}\r\n                    className=\"pointer-events-none\"\r\n                />\r\n            )}\r\n\r\n            <div className=\"absolute bottom-4 left-4 z-10 flex items-center gap-2\">\r\n                <span className=\"px-2 py-1 rounded bg-black/60 backdrop-blur-md text-xs font-medium text-white shadow-sm border border-white/5\">\r\n                    {mediaState?.name || \"Guest\"}\r\n                </span>\r\n                {mediaState?.isAudioOff && (\r\n                    <div className=\"p-1 rounded-full bg-red-500/80 backdrop-blur-sm text-white\">\r\n                        <MicOff className=\"h-3 w-3\" />\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}